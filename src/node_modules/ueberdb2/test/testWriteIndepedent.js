const UeberDB = require('../index');
const Randexp = require("randexp");

// db init
const db = new UeberDB.database("mysql", {"user":"ueberdb", host: "localhost", "password":"ueberdb", database: "ueberdb", engine: "InnoDB"});

test(db);

// using async
async function test(db){
  // initialize the database connection.
  await db.init();

  setInterval(function(){
    var input = {a:1,b: new Randexp(/.+/).gen()};
    var key = new Randexp(/.+/).gen();
    // no need for await because it's already in cache..
    db.set(key, input);
  }, 100)

}
